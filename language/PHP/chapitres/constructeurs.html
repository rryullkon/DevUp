<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>PHP - Constructeurs et destructeurs</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>

<body>
    <header>
        <h1>Constructeurs et destructeurs</h1>
        <p>Initialisation et nettoyage des objets.</p>
    </header>

    <main>
        <h1>Chapitre 18: Constructeurs et destructeurs</h1>

        <h2>1. Qu'est-ce qu'un constructeur ?</h2>
        <p>
            Un <strong>constructeur</strong> est une méthode spéciale appelée automatiquement lors de la création d’un objet.  
            Elle permet d’initialiser ses propriétés ou d'exécuter du code nécessaire dès le départ.
        </p>

        <h3>Syntaxe :</h3>
        <p>En PHP, on utilise la méthode magique <code>__construct()</code>.</p>

        <h3>Exemple :</h3>
        <pre>
&lt;?php
class Utilisateur {
    public $nom;

    public function __construct($nom) {
        $this->nom = $nom;
        echo "Utilisateur $nom créé.&lt;br&gt;";
    }
}

$u = new Utilisateur("Alice"); // Affiche "Utilisateur Alice créé."
?&gt;
        </pre>

        <h2>2. Qu'est-ce qu'un destructeur ?</h2>
        <p>
            Un <strong>destructeur</strong> est une méthode spéciale appelée automatiquement quand l’objet est détruit, généralement en fin de script.  
            Il est utile pour fermer des connexions, libérer des ressources, ou exécuter un nettoyage.
        </p>

        <h3>Syntaxe :</h3>
        <p>On utilise la méthode magique <code>__destruct()</code>.</p>

        <h3>Exemple :</h3>
        <pre>
&lt;?php
class Fichier {
    private $nom;

    public function __construct($nom) {
        $this->nom = $nom;
        echo "Ouverture du fichier $nom...&lt;br&gt;";
    }

    public function __destruct() {
        echo "Fermeture du fichier $this->nom...&lt;br&gt;";
    }
}

$f = new Fichier("data.txt");
// À la fin du script, le destructeur est automatiquement appelé.
?&gt;
        </pre>

        <h2>3. Utilisation combinée</h2>
        <p>
            Les constructeurs et destructeurs sont très utiles ensemble : l’un prépare l’objet, l’autre le termine correctement.
        </p>
        <pre>
&lt;?php
class Connexion {
    private $utilisateur;

    public function __construct($utilisateur) {
        $this->utilisateur = $utilisateur;
        echo "Connexion ouverte pour $utilisateur.&lt;br&gt;";
    }

    public function __destruct() {
        echo "Connexion fermée pour $this->utilisateur.&lt;br&gt;";
    }
}

$conn = new Connexion("admin");
// Affiche d'abord "Connexion ouverte...", puis à la fin "Connexion fermée..."
?&gt;
        </pre>

        <h2>4. Résumé</h2>
        <ul>
            <li><strong>__construct()</strong> est utilisé pour initialiser un objet dès sa création</li>
            <li><strong>__destruct()</strong> est appelé automatiquement quand l’objet est détruit ou à la fin du script</li>
            <li>Utile pour ouvrir/fermer des fichiers, connexions, ressources, etc.</li>
            <li>Améliore la gestion de la mémoire et la robustesse du code</li>
        </ul>
    </main>

    <footer>
        <p>Guide d'apprentissage PHP &copy; 2025 | Pour toute question, consultez la <a
                href="https://www.php.net/manual/fr/language.oop5.decon.php">documentation officielle</a></p>
    </footer>
</body>

</html>
