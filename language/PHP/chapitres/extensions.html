<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>PHP - Extensions PHP</title>
    <link rel="stylesheet" href="../assets/style.css" />
</head>

<body>
    <header>
        <h1>Extensions PHP</h1>
        <p>Création d'extensions PHP en C.</p>
    </header>

    <main>
        <h1>Chapitre 67: Extensions PHP</h1>

        <h2>1. Qu'est-ce qu'une extension PHP ?</h2>
        <p>
            Une extension PHP est un module écrit en langage C qui ajoute des fonctionnalités à PHP,
            permettant d’améliorer les performances ou d’accéder à des fonctionnalités système non disponibles en PHP natif.
        </p>

        <h2>2. Pourquoi créer une extension en C ?</h2>
        <ul>
            <li>Optimiser les performances pour des opérations critiques.</li>
            <li>Accéder à des bibliothèques ou fonctionnalités système.</li>
            <li>Étendre les capacités du langage PHP au-delà des limites du code PHP.</li>
        </ul>

        <h2>3. Structure d'une extension PHP</h2>
        <p>
            Une extension est composée d’un ensemble de fichiers C, incluant un fichier principal avec les fonctions à exposer,
            un fichier de configuration et un fichier <code>.h</code> pour les définitions.
        </p>

        <h2>4. Exemple simple d'extension</h2>
        <pre>
#include "php.h"

PHP_FUNCTION(hello_world)
{
    php_printf("Hello, world!\\n");
}

const zend_function_entry myext_functions[] = {
    PHP_FE(hello_world, NULL)
    PHP_FE_END
};

zend_module_entry myext_module_entry = {
    STANDARD_MODULE_HEADER,
    "myext",
    myext_functions,
    NULL,
    NULL,
    NULL,
    NULL,
    NULL,
    NO_VERSION_YET,
    STANDARD_MODULE_PROPERTIES
};

ZEND_GET_MODULE(myext)
        </pre>

        <h2>5. Compilation et installation</h2>
        <ol>
            <li>Créer le dossier de l’extension avec les fichiers source.</li>
            <li>Utiliser <code>phpize</code> pour préparer l’environnement de compilation.</li>
            <li>Configurer avec <code>./configure</code>.</li>
            <li>Compiler avec <code>make</code>.</li>
            <li>Installer avec <code>make install</code>.</li>
            <li>Activer l’extension dans le fichier <code>php.ini</code>.</li>
        </ol>

        <h2>6. Bonnes pratiques</h2>
        <ul>
            <li>Bien gérer la mémoire pour éviter les fuites.</li>
            <li>Respecter les conventions de nommage PHP et Zend.</li>
            <li>Documenter les fonctions exposées.</li>
            <li>Tester soigneusement l’extension.</li>
        </ul>

        <h2>7. Conclusion</h2>
        <p>
            Créer des extensions en C permet d’étendre PHP de manière puissante et efficace, mais nécessite une bonne maîtrise du langage C et de l’API PHP interne.
        </p>
    </main>

    <footer>
        <p>
            Guide d'apprentissage PHP &copy; 2025 |
            <a href="https://www.php.net/manual/fr/internals2.php" target="_blank" rel="noopener noreferrer">
                Documentation officielle sur la création d'extensions PHP
            </a>
        </p>
    </footer>
</body>

</html>
