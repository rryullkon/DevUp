<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>PHP - Flux (Streams)</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>

<body>
    <header>
        <h1>Flux (Streams)</h1>
        <p>Manipulation avancée des flux de données.</p>
    </header>

    <main>
        <h1>Chapitre 29: Flux (Streams)</h1>

        <h2>1. Qu'est-ce qu'un flux ?</h2>
        <p>
            Un flux (stream) est une abstraction pour lire ou écrire des données de façon séquentielle, que ce soit
            depuis un fichier, une entrée/sortie réseau, ou même des données en mémoire.
        </p>

        <h2>2. Ouverture d’un flux</h2>
        <p>On utilise <code>fopen()</code> pour ouvrir un flux, qui peut pointer vers un fichier ou une ressource réseau :</p>

        <pre>
&lt;?php
// Ouvrir un fichier en lecture
$flux = fopen("exemple.txt", "r");

// Ouvrir une URL distante
$flux = fopen("http://example.com", "r");
?&gt;
        </pre>

        <h2>3. Lecture et écriture sur un flux</h2>
        <p>Vous pouvez lire avec <code>fread()</code> ou écrire avec <code>fwrite()</code> :</p>

        <pre>
&lt;?php
// Lire 1024 octets
$contenu = fread($flux, 1024);

// Écrire dans un flux ouvert en écriture
fwrite($flux, "Du texte à écrire");
?&gt;
        </pre>

        <h2>4. Types de flux courants</h2>
        <ul>
            <li><code>php://stdin</code>, <code>php://stdout</code>, <code>php://stderr</code> – flux d’entrée/sortie standard</li>
            <li><code>php://memory</code>, <code>php://temp</code> – flux en mémoire</li>
            <li>flux réseau, sockets, etc.</li>
        </ul>

        <h2>5. Gestion avancée</h2>
        <p>
            Les flux permettent d’utiliser des wrappers, de manipuler des flux compressés, chiffrés, ou même créer vos propres
            wrappers personnalisés.
        </p>

        <h2>6. Exemple d’utilisation d’un flux mémoire</h2>
        <pre>
&lt;?php
// Ouvrir un flux en mémoire
$flux = fopen('php://memory', 'r+');
fwrite($flux, "Données en mémoire");
rewind($flux); // Revenir au début du flux
echo stream_get_contents($flux);
fclose($flux);
?&gt;
        </pre>

        <h2>7. Résumé</h2>
        <ul>
            <li>Les flux abstraient la lecture/écriture séquentielle</li>
            <li>Ils peuvent pointer vers des fichiers, réseaux, ou même la mémoire</li>
            <li>Permettent la manipulation avancée via wrappers et contextes</li>
        </ul>
    </main>

    <footer>
        <p>Guide d'apprentissage PHP &copy; 2025 | Plus d'informations sur les flux : <a href="https://www.php.net/manual/fr/book.stream.php">documentation officielle PHP</a>.</p>
    </footer>
</body>

</html>
