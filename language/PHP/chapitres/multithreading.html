<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>PHP - Multithreading</title>
    <link rel="stylesheet" href="../assets/style.css" />
</head>

<body>
    <header>
        <h1>Multithreading</h1>
        <p>Programmation parallèle en PHP.</p>
    </header>

    <main>
        <h1>Chapitre 66: Multithreading</h1>

        <h2>1. Qu'est-ce que le multithreading ?</h2>
        <p>
            Le multithreading permet l'exécution simultanée de plusieurs threads (fils d’exécution) au sein d’un même processus,
            ce qui peut améliorer les performances des applications en exploitant mieux les ressources CPU.
        </p>

        <h2>2. Le multithreading en PHP</h2>
        <p>
            PHP est historiquement un langage mono-thread, mais depuis PHP 7, plusieurs extensions permettent d’utiliser le multithreading,
            notamment <code>pthreads</code> ou plus récemment <code>parallel</code>.
        </p>

        <h2>3. Extension pthreads</h2>
        <ul>
            <li>Permet de créer, gérer et synchroniser des threads dans PHP.</li>
            <li>Utilisée surtout en CLI (ligne de commande), pas recommandée pour les environnements web.</li>
            <li>Requiert une installation spécifique.</li>
        </ul>

        <h2>4. Exemple simple avec pthreads</h2>
        <pre>
class MyThread extends Thread
{
    public function run()
    {
        echo "Thread en cours d'exécution\n";
    }
}

$thread = new MyThread();
$thread->start();
$thread->join();
        </pre>

        <h2>5. Extension parallel</h2>
        <p>
            L’extension <code>parallel</code> est une alternative moderne et plus performante au pthreads, recommandée pour PHP 7.4+.
        </p>

        <h2>6. Bonnes pratiques</h2>
        <ul>
            <li>Utiliser le multithreading principalement pour des tâches CPU intensives ou des traitements parallèles.</li>
            <li>Éviter les conflits d’accès aux ressources partagées.</li>
            <li>Tester soigneusement pour éviter les conditions de course (race conditions).</li>
            <li>Utiliser des extensions compatibles avec votre environnement d’exécution.</li>
        </ul>

        <h2>7. Conclusion</h2>
        <p>
            Bien que PHP ne soit pas conçu à la base pour le multithreading, les extensions comme pthreads et parallel ouvrent la voie à la programmation parallèle,
            permettant d'améliorer les performances dans certains contextes spécifiques.
        </p>
    </main>

    <footer>
        <p>
            Guide d'apprentissage PHP &copy; 2025 |
            <a href="https://www.php.net/manual/fr/book.pthreads.php" target="_blank" rel="noopener noreferrer">
                Documentation officielle pthreads
            </a>
        </p>
    </footer>
</body>

</html>
