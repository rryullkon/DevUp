<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>PHP - Optimisation PHP</title>
    <link rel="stylesheet" href="../assets/style.css" />
</head>

<body>
    <header>
        <h1>Optimisation PHP</h1>
        <p>Techniques pour améliorer les performances.</p>
    </header>

    <main>
        <h1>Chapitre 55: Optimisation PHP</h1>

        <h2>1. Pourquoi optimiser le code PHP ?</h2>
        <p>
            Optimiser un script PHP permet de réduire le temps d'exécution, d’économiser les ressources serveur et d'améliorer l'expérience utilisateur.
            Cela devient essentiel lorsque le trafic augmente ou que les opérations sont complexes.
        </p>

        <h2>2. Techniques d'optimisation courantes</h2>
        <ul>
            <li><strong>Éviter les requêtes SQL inutiles :</strong> utilisez des jointures ou regroupez les appels en une seule requête.</li>
            <li><strong>Cache des résultats :</strong> stocker temporairement les données fréquemment demandées (ex. : avec Redis ou Memcached).</li>
            <li><strong>Limiter les boucles imbriquées :</strong> les structures trop profondes peuvent fortement ralentir l'exécution.</li>
            <li><strong>OpCache :</strong> activez l’OpCache de PHP pour accélérer l’exécution des scripts compilés.</li>
            <li><strong>Chargement paresseux (lazy loading) :</strong> ne charger que ce qui est nécessaire, au moment opportun.</li>
        </ul>

        <h2>3. Optimisation du code</h2>
        <pre>
&lt;?php
// Mauvaise pratique
for ($i = 0; $i < count($array); $i++) {
    echo $array[$i];
}

// Bonne pratique
$length = count($array);
for ($i = 0; $i < $length; $i++) {
    echo $array[$i];
}
?&gt;
        </pre>

        <h2>4. Gestion de la mémoire</h2>
        <ul>
            <li>Libérer les variables inutiles avec <code>unset()</code>.</li>
            <li>Utiliser des générateurs (<code>yield</code>) pour parcourir de grandes quantités de données sans tout charger en mémoire.</li>
        </ul>

        <h2>5. Utilisation du cache HTTP</h2>
        <p>
            Le cache HTTP permet de limiter les appels serveur en stockant les réponses côté client ou proxy.
            Cela est utile notamment pour les API ou les pages peu dynamiques.
        </p>

        <h2>6. Profilage et outils</h2>
        <ul>
            <li><strong>Xdebug :</strong> pour profiler le code et repérer les goulots d’étranglement.</li>
            <li><strong>Blackfire.io :</strong> outil de profiling avancé.</li>
            <li><strong>Laravel Telescope (si framework Laravel) :</strong> surveillance des performances et des requêtes.</li>
        </ul>

        <h2>7. Bonnes pratiques supplémentaires</h2>
        <ul>
            <li>Évitez l’utilisation excessive de <code>include</code>/<code>require</code> dans les boucles.</li>
            <li>Regroupez les fichiers CSS/JS et minifiez-les côté frontend pour réduire les appels HTTP (gain global).</li>
            <li>Utilisez les types stricts (<code>declare(strict_types=1);</code>) pour éviter des bugs coûteux à exécuter.</li>
        </ul>

        <h2>8. Conclusion</h2>
        <p>
            Une bonne optimisation PHP repose sur des habitudes de codage efficaces, l’usage du cache, et des outils de mesure.
            Une attention régulière à la performance garantit un service fluide, même sous forte charge.
        </p>
    </main>

    <footer>
        <p>
            Guide d'apprentissage PHP &copy; 2025 | 
            <a href="https://www.php.net/manual/fr/intro.opcache.php" target="_blank" rel="noopener noreferrer">
                En savoir plus sur l’OpCache pour améliorer les performances PHP
            </a>
        </p>
    </footer>
</body>

</html>
