<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Travaux pratique - Application météo</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>

<body>
    <header>
        <h1>Application météo</h1>
        <p>Développez une application météo qui consomme une API externe.</p>
    </header>

    <main>
        <h1>Travaux pratique - Chapitre 16 : Application météo</h1>

        <h2>Objectif</h2>
        <p>
            Créez une application React capable d’afficher la météo actuelle d’une ville donnée, en utilisant une API météo publique (ex : OpenWeatherMap).
            Ce projet vous permettra de travailler avec les requêtes HTTP, la gestion d’état et l’affichage dynamique des données.
        </p>

        <h2>Étapes détaillées</h2>

        <h3>1. S’inscrire et obtenir une clé API</h3>
        <p>
            Inscrivez-vous sur <a href="https://openweathermap.org/api" target="_blank" rel="noopener">OpenWeatherMap</a> et récupérez votre clé API gratuite.
        </p>

        <h3>2. Initialisation du projet</h3>
        <p>
            Si besoin, créez un nouveau projet React avec Create React App :
        </p>
        <pre>
npx create-react-app application-meteo
cd application-meteo
npm start
        </pre>

        <h3>3. Installer Axios</h3>
        <p>
            Installez Axios pour faciliter les requêtes HTTP :
        </p>
        <pre>
npm install axios
        </pre>

        <h3>4. Structure du composant principal</h3>
        <p>
            Créez un composant <code>App.js</code> avec un champ pour saisir le nom d’une ville, un bouton de recherche et une zone d’affichage des résultats météo.
        </p>

        <h3>5. Gestion de l’état et requête API</h3>
        <p>
            Utilisez <code>useState</code> pour stocker la ville saisie, les données météo et les messages d’erreur.  
            Utilisez <code>axios</code> pour envoyer une requête à l’API OpenWeatherMap lors du clic sur le bouton.
        </p>

        <pre>
import React, { useState } from 'react';
import axios from 'axios';

function App() {
  const [ville, setVille] = useState('');
  const [meteo, setMeteo] = useState(null);
  const [erreur, setErreur] = useState('');

  const apiKey = 'VOTRE_CLE_API_ICI';

  const rechercherMeteo = async () => {
    if (ville.trim() === '') return;

    try {
      const response = await axios.get(
        `https://api.openweathermap.org/data/2.5/weather?q=${ville}&appid=${apiKey}&units=metric&lang=fr`
      );
      setMeteo(response.data);
      setErreur('');
    } catch (err) {
      setMeteo(null);
      setErreur('Ville non trouvée ou erreur de connexion.');
    }
  };

  return (
    &lt;div&gt;
      &lt;h1&gt;Application météo&lt;/h1&gt;

      &lt;input
        type="text"
        value={ville}
        onChange={e =&gt; setVille(e.target.value)}
        placeholder="Entrez une ville"
      /&gt;
      &lt;button onClick={rechercherMeteo}&gt;Rechercher&lt;/button&gt;

      {erreur && &lt;p style={{ color: 'red' }}&gt;{erreur}&lt;/p&gt;}

      {meteo && (
        &lt;div&gt;
          &lt;h2&gt;Météo à {meteo.name}&lt;/h2&gt;
          &lt;p&gt;Température : {meteo.main.temp} °C&lt;/p&gt;
          &lt;p&gt;Conditions : {meteo.weather[0].description}&lt;/p&gt;
          &lt;p&gt;Humidité : {meteo.main.humidity} %&lt;/p&gt;
          &lt;p&gt;Vent : {meteo.wind.speed} m/s&lt;/p&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
}

export default App;
        </pre>

        <h3>6. Améliorations possibles</h3>
        <ul>
            <li>Ajouter un indicateur de chargement pendant la requête.</li>
            <li>Gérer plusieurs villes et sauvegarder l’historique.</li>
            <li>Afficher une icône météo selon les conditions.</li>
            <li>Utiliser la géolocalisation pour afficher la météo locale automatiquement.</li>
        </ul>

        <h2>Conclusion</h2>
        <p>
            Ce projet vous fera pratiquer la consommation d’API, la gestion d’état et les interactions utilisateur en React.  
            N’hésitez pas à explorer d’autres APIs et fonctionnalités pour enrichir votre application.
        </p>

    </main>

    <footer>
        <p>Guide d'apprentissage React &copy; 2025 | Pour en savoir plus, consultez la <a
                href="https://fr.reactjs.org">documentation officielle React</a></p>
    </footer>
</body>

</html>
